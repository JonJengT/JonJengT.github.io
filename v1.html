<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Multiple Choice Question</title>
    <style>
        body{font-family:Arial,Helvetica,sans-serif;max-width:700px;margin:40px auto;padding:0 16px}
        .question{margin-bottom:16px}
        .options label{display:block;margin:6px 0;cursor:pointer}
        .feedback{margin-top:12px;font-weight:600}
        .correct{color:green}
        .wrong{color:#c00}
    </style>
</head>
<body>
    <form id="mcqForm" class="mcq">
        <div class="question">
            <strong>Question 1:</strong> What is my real name?
        </div>

        <div class="options" role="radiogroup" aria-labelledby="q1">
            <label><input type="radio" name="answer" value="a"> A) JonJeng</label>
            <label><input type="radio" name="answer" value="b"> B) Jeremiah</label>
            <label><input type="radio" name="answer" value="c"> C) Joe</label>
            <label><input type="radio" name="answer" value="d"> D) Jake</label>
        </div>

        <button type="submit">Submit</button>
        <div id="feedback" class="feedback" aria-live="polite"></div>
        <div id="score" class="feedback" style="display:inline-block;margin-left:12px" aria-live="polite"></div>
        <button id="nextBtn" type="button" style="display:none;margin-left:8px">Next</button>
    </form>

    <script>
        (function(){
            const form = document.getElementById('mcqForm');
            const feedback = document.getElementById('feedback');
            const scoreEl = document.getElementById('score');
            const nextBtn = document.getElementById('nextBtn');
            const correctValue = 'a';

            const scoreKey = 'quizScore';
            const pageKey = 'quiz_v1_answered';
            function getScore(){ return Number(localStorage.getItem(scoreKey) || 0); }
            function setScore(n){ localStorage.setItem(scoreKey, String(n)); }
            function showScore(){ scoreEl.textContent = 'Score: ' + getScore(); }

            // initialize score display
            showScore();

            nextBtn.addEventListener('click', () => {
                window.location.href = 'v2.html';
            });

            form.addEventListener('submit', function(e){
                e.preventDefault();
                const choice = form.answer.value;
                if(!choice){
                    feedback.textContent = 'Please select an option.';
                    feedback.className = 'feedback wrong';
                    return;
                }
                const alreadyAnswered = localStorage.getItem(pageKey) === '1';
                if(choice === correctValue){
                    feedback.textContent = 'Correct â€” Good Job! That should have been easy.';
                    feedback.className = 'feedback correct';
                    if(!alreadyAnswered){
                        setScore(getScore() + 1);
                        localStorage.setItem(pageKey, '1');
                        showScore();
                    }
                } else {
                    feedback.textContent = 'Incorrect. What! How did you not know my name?';
                    feedback.className = 'feedback wrong';
                    if(!alreadyAnswered){
                        // mark as answered so user can't re-submit to change scoring
                        localStorage.setItem(pageKey, '1');
                    }
                }
                // disable radios and the submit button after answering to prevent changes
                Array.from(form.elements).forEach(el => {
                    if(el.type === 'radio' || (el.tagName === 'BUTTON' && el.type === 'submit')) el.disabled = true;
                });

                // show Next button so the user can continue to the next page
                nextBtn.style.display = 'inline';
            });
        })();
    </script>
</body>
</html>